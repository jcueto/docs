(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{383:function(e,s,t){"use strict";t.r(s);var a=t(43),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[e._v("BEFORE YOU BEGIN TROUBLESHOOTING")]),e._v(" "),t("p",[e._v("Before you begin troubleshooting we suggest you check all of the following:")]),e._v(" "),t("ul",[t("li",[e._v("Check that your current binary version is the latest listed on the "),t("RouterLink",{attrs:{to:"/operators/current-testnet-parameters.html"}},[e._v("current\ntestnet parameters")]),e._v(" "),t("ul",[t("li",[e._v("Check the version on your localhost using "),t("code",[e._v("oasis-node --version")])]),e._v(" "),t("li",[e._v("Check the version on your server using "),t("code",[e._v("oasis-node --version")])])])],1),e._v(" "),t("li",[e._v("If upgrading, make sure that you've wiped state (unless that is explicitly not\nrequired)")]),e._v(" "),t("li",[e._v("If you're doing anything with the entity:\n"),t("ul",[t("li",[e._v("Do you have the latest genesis?")]),e._v(" "),t("li",[e._v("Do you have the correct private key (or Ledger device).")]),e._v(" "),t("li",[e._v("If you're signing a transaction:\n"),t("ul",[t("li",[e._v("Do you sufficient account balance to make the transaction?\n"),t("ul",[t("li",[e._v("Run "),t("code",[e._v("oasis-node stake account info")])])])]),e._v(" "),t("li",[e._v("Are you using the correct nonce?\n"),t("ul",[t("li",[e._v("Run "),t("code",[e._v("oasis-node stake account info")])])])])])])])]),e._v(" "),t("li",[e._v("If you're generating a transaction:\n"),t("ul",[t("li",[e._v("Do you have the latest genesis?")])])]),e._v(" "),t("li",[e._v("If you're submitting a transaction:\n"),t("ul",[t("li",[e._v("Do you have the latest genesis?")]),e._v(" "),t("li",[e._v("Is your node synced? If not, the transaction will fail to run properly")])])])])]),e._v(" "),t("h2",{attrs:{id:"oasis-node-binary"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oasis-node-binary"}},[e._v("#")]),e._v(" "),t("code",[e._v("oasis-node")]),e._v(" Binary")]),e._v(" "),t("h3",{attrs:{id:"building-from-source-go-errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#building-from-source-go-errors"}},[e._v("#")]),e._v(" Building from Source: Go Errors")]),e._v(" "),t("p",[e._v("First, make sure you have go version >=go1.13.0 and protocol buffers installed\n(use "),t("code",[e._v("brew install protobuf")]),e._v(" on Mac).")]),e._v(" "),t("p",[e._v("Error message example:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('PWD: /home/oasis/oasis-core/go/grpc\nCMD: [protoc -I ./ --go_out=plugins=grpc,paths=source_relative:. common/common.proto]\nprotoc-gen-go: program not found or is not executable\n--go_out: protoc-gen-go: Plugin failed with status code 1.\nFAILED: exit status 1\nexit status 1\ngrpc/generate.go:3: running "go": exit status 1\n')])])]),t("p",[e._v("Resolve this error by ensuring you have "),t("code",[e._v("protoc-gen-go")]),e._v(" installed and adding\n"),t("code",[e._v("$GOPATH/bin")]),e._v(" to your path:")]),e._v(" "),t("p",[e._v("Check installation:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("which")]),e._v(" protoc-gen-go\n")])])]),t("p",[e._v("Install:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("go get github.com/golang/protobuf/protoc-gen-go\n")])])]),t("p",[e._v("Add to your path variable:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$GOPATH")]),e._v("/bin\n")])])]),t("p",[e._v("If you don't see a helpful error message while building, scroll up to see if\nany additional information was provided.")]),e._v(" "),t("h3",{attrs:{id:"building-from-source-rust-errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#building-from-source-rust-errors"}},[e._v("#")]),e._v(" Building from Source: Rust Errors")]),e._v(" "),t("p",[e._v("Error message example:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("error[E0412]: cannot find type `ucontext_t` in this scope\n")])])]),t("p",[e._v("Error messages from "),t("code",[e._v("rustc")]),e._v(" can be ignored; all you need from "),t("code",[e._v("oasis-core")]),e._v(" are\nthe "),t("code",[e._v("go")]),e._v(" components. In general, avoid trying to build the rust components.")]),e._v(" "),t("p",[e._v("You can use the following command to stick to go:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" go\n")])])]),t("h3",{attrs:{id:"alternative-docker-binary"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alternative-docker-binary"}},[e._v("#")]),e._v(" Alternative: Docker Binary")]),e._v(" "),t("p",[e._v("If you're having lots of trouble building from source, you can try pulling the\nDocker image, then copy the contained binary to your local machine (only works\non Linux) with the following command:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" oasis_node:/oasis/bin/oasis_node\n")])])]),t("h2",{attrs:{id:"running-a-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-a-node"}},[e._v("#")]),e._v(" Running a Node")]),e._v(" "),t("h3",{attrs:{id:"invalid-permissions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#invalid-permissions"}},[e._v("#")]),e._v(" Invalid Permissions")]),e._v(" "),t("h4",{attrs:{id:"permissions-for-node-and-entity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-node-and-entity"}},[e._v("#")]),e._v(" Permissions for node and entity")]),e._v(" "),t("p",[e._v("Error Message:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("common/Mkdir: path '/serverdir/node' has invalid permissions: -rwxr-xr-x\n")])])]),t("p",[e._v("The "),t("code",[e._v("entity")]),e._v(" and "),t("code",[e._v("node")]),e._v(" directories both need to have permissions "),t("code",[e._v("rwx------")]),e._v(".\nMake sure you initialize the directory with correct permissions or change them\nusing "),t("code",[e._v("chmod")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" --mode "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" --parents "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("entity,node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" /serverdir/node\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" /serverdir/entity\n")])])]),t("h4",{attrs:{id:"permissions-for-pem-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-pem-files"}},[e._v("#")]),e._v(" Permissions for .pem files")]),e._v(" "),t("p",[e._v("Error Message example:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("signature/signer/file: invalid PEM file permissions 700 on /serverdir/node/identity.pem\n")])])]),t("p",[e._v("All "),t("code",[e._v(".pem")]),e._v(" files should have the permissions "),t("code",[e._v("600")]),e._v(".\nYou can set the permissions for all "),t("code",[e._v(".pem")]),e._v(" files in a directory using the\nfollowing command:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("600")]),e._v(" /path/*.pem\n")])])]),t("h4",{attrs:{id:"serverdir-ownership"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serverdir-ownership"}},[e._v("#")]),e._v(" Serverdir Ownership")]),e._v(" "),t("p",[e._v("Another possible cause of permission issues is not giving ownership of your\n"),t("code",[e._v("serverdir")]),e._v(" to the user running the node (e.g. "),t("code",[e._v("docker-host")]),e._v(" or replace with\nyour user):")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chown")]),e._v(" -R docker-host:docker-host /serverdir\n")])])]),t("p",[e._v("In general, to avoid problems when running docker, specify the user when\nrunning "),t("code",[e._v("docker")]),e._v(" commands by adding the flag "),t("code",[e._v("--user $(id -u):$(id -g)")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"cannot-find-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cannot-find-file"}},[e._v("#")]),e._v(" Cannot Find File")]),e._v(" "),t("p",[e._v("Error Message examples:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("no such file or directory\n")])])]),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("file does not exist\n")])])]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('ts=2019-11-17T03:42:09.778647033Z level=error module=cmd/registry/node caller=node.go:127 msg="failed to load entity" err="file does not exist"\n')])])]),e._v(" "),t("p",[e._v("More often than you'd expect, this error is the result of setting the path\nincorrectly.\nYou may have left something like "),t("code",[e._v("--genesis.file $GENESIS_FILE_PATH")]),e._v(" in the\ncommand without setting "),t("code",[e._v("$GENESIS_FILE_PATH")]),e._v(" first, or set the path incorrectly.\nCheck that "),t("code",[e._v("echo $GENESIS_FILE_PATH")]),e._v(" matches your expectation or provide a path\nin the command.")]),e._v(" "),t("p",[e._v("Another possible cause: the files in your localhost directory cannot be read\nfrom the container. Make sure to run commands in the same session within the\ncontainer.")]),e._v(" "),t("h2",{attrs:{id:"staking-and-registering"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#staking-and-registering"}},[e._v("#")]),e._v(" Staking and Registering")]),e._v(" "),t("h3",{attrs:{id:"transaction-out-of-gas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transaction-out-of-gas"}},[e._v("#")]),e._v(" Transaction Out of Gas")]),e._v(" "),t("p",[e._v("Error message:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('module=cmd/stake caller=stake.go:70 msg="failed to submit transaction" err="rpc error: code = Unknown desc = staking: add escrow transaction failed: out of gas" attempt=1\n')])])]),e._v(" "),t("p",[e._v("The docs are now updated to show that you need to add\n"),t("code",[e._v("--stake.transaction.fee.gas")]),e._v(" and "),t("code",[e._v("--stake.transaction.fee.amount")]),e._v(" flags when\ngenerating your transaction. Note that if you're re-generating a transaction,\nyou will need to increment the "),t("code",[e._v("--nonce")]),e._v(" flag.")]),e._v(" "),t("h3",{attrs:{id:"ssh-tunnel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh-tunnel"}},[e._v("#")]),e._v(" SSH Tunnel")]),e._v(" "),t("p",[e._v("Note that this portion may not be relevant in future versions.")]),e._v(" "),t("p",[e._v("Error message example:")]),e._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("bind: Cannot assign requested address\n")])])]),t("p",[e._v("This error was encountered while trying to create ssh tunnel from localhost's\nDocker container, and was fixed by making the "),t("code",[e._v("oasis-node")]),e._v(" binary from source\ninstead of using the Docker image.")])])}),[],!1,null,null,null);s.default=r.exports}}]);